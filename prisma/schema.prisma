datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model user {
    id String @id
    username String
    email String @unique
    password String
    owner_id String
    subscriptions subscription[]
    role role @relation(fields: [role_id], references: [id])
    role_id String
    config config?
    app_config app_config?
    created_at DateTime @db.Timestamp(0)
    updated_at DateTime @db.Timestamp(0)
}

model pricing {
    id String @id
    pricing_name String
    duration Int @db.SmallInt
    amount Int @db.SmallInt
    subscriptions subscription[]
    created_at DateTime @db.Timestamp(0)
    updated_at DateTime @db.Timestamp(0)
}

model subscription {
    id String @id
    payment_date DateTime @db.Timestamp(0)
    warned Boolean
    notified Boolean
    active Boolean
    expired Boolean
    pricing pricing  @relation(fields: [pricing_id], references: [id])
    pricing_id String
    user user @relation(fields: [user_id], references: [id])
    user_id  String
    created_at DateTime @db.Timestamp(0)
    updated_at DateTime @db.Timestamp(0)
}

model role {
    id String @id
    type String
    users user[]
    created_at DateTime @db.Timestamp(0)
    updated_at DateTime @db.Timestamp(0)
}

model config {
    id String @id
    language String
    send_notifications Boolean
    send_warnings Boolean
    user user @relation(fields: [user_id], references: [id])
    user_id  String
    created_at DateTime @db.Timestamp(0)
    updated_at DateTime @db.Timestamp(0)
}

model app_config {
    id String @id
    warning_delay Int @db.SmallInt
    notification_delay Int @db.SmallInt
    email_content String
    last_sent_report DateTime @db.Timestamp(0)
    user user @relation(fields: [user_id], references: [id])
    user_id  String
    created_at DateTime @db.Timestamp(0)
    updated_at DateTime @db.Timestamp(0)
}